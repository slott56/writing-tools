<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>language.py &#8212; Fiction Tools 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=f2a433a1"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="features.py" href="features.html" />
    <link rel="prev" title="terrain-tk.py and notebooks/terrain" href="terrain.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="language-py">
<h1>language.py<a class="headerlink" href="#language-py" title="Link to this heading">¶</a></h1>
<p>Implements a specific ConLang for a series of books.
This includes a few grammar rules and lexicon rules to create words.</p>
<section id="background">
<h2>Background<a class="headerlink" href="#background" title="Link to this heading">¶</a></h2>
<p>This is a for a specific Epic Fantasy series.
It implements an imperial trade language shared by a handful of kingdoms all under control of the “Western Empire.”</p>
<p>The essential language has a relatively simple structure.</p>
<p>Sentences have forms like VP NP NP, VP NP PP, VP NP PP NP PP.
The verb is always first.
Nouns follow, generally decorated with prepositions.</p>
<p>There are some additional grammar rules for noun phrases to inject determiners to help keep the subjects and objects stright.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">NP</span> <span class="o">-&gt;</span> <span class="n">Det</span> <span class="n">Nominal</span> <span class="p">;</span>
<span class="n">Nominal</span> <span class="o">-&gt;</span> <span class="n">Nominal</span> <span class="n">Noun</span> <span class="p">;</span>
</pre></div>
</div>
<p>A transliteration of “Kill the mage” would look like this:</p>
<blockquote>
<div><p>“go-Kill you mage-the”</p>
</div></blockquote>
<p>There’s a verb, “go-Kill”, and two nouns, “you” and “mage-the”.</p>
<p>Verbs:</p>
<ul class="simple">
<li><p>Present tense is the base form of verbs.</p></li>
<li><p>Imperative gets a “go-” prefix.</p></li>
<li><p>Present participle (“-ing” in English) gets a “now-” prefix.</p></li>
<li><p>Past (“-ed” in English) gets a “did-” prefix.</p></li>
</ul>
<p>There’s no person conjugation. It’s a separate word and comes right after the verb.</p>
<p>Generally, the ConLang lacks intransitive verbs. “did-Bark the dog at something.”
“did-See myself the man.” “did-Give the dog to a man.” “did-Say the man did-Bark the dog at something.”</p>
<p>Nouns determiners (this, that, the, any, all, etc.) are suffixed onto the noun.</p>
</section>
<section id="module-language">
<span id="implementation"></span><h2>Implementation<a class="headerlink" href="#module-language" title="Link to this heading">¶</a></h2>
<p>ConLang Grammar and Lexicon.</p>
<p>See <a class="reference external" href="https://www.nltk.org/book/ch05.html">https://www.nltk.org/book/ch05.html</a> for the Parts-of-Speech Tags</p>
<p>Also, see <a class="reference external" href="https://www.ling.upenn.edu/courses/Fall_2003/ling001/penn_treebank_pos.html">https://www.ling.upenn.edu/courses/Fall_2003/ling001/penn_treebank_pos.html</a>
for a more complete set.</p>
<p>See <a class="reference external" href="https://www.cis.upenn.edu/~bies/manuals/tagguide.pdf">https://www.cis.upenn.edu/~bies/manuals/tagguide.pdf</a></p>
<p>Also <a class="reference external" href="https://universaldependencies.org/u/pos/all.html">https://universaldependencies.org/u/pos/all.html</a></p>
<p>The tricky part is – of course – the grammar.</p>
<p>Our goal is to move from a tagged English parse tree to the ConLang tree through a number of transformations.</p>
<p>Input</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">S</span> <span class="p">(</span><span class="n">VP</span> <span class="p">(</span><span class="n">TV</span> <span class="n">kill</span><span class="p">)</span> <span class="p">(</span><span class="n">NP</span> <span class="p">(</span><span class="n">DET</span> <span class="n">the</span><span class="p">)</span> <span class="p">(</span><span class="n">N</span> <span class="n">mage</span><span class="p">))))</span>
</pre></div>
</div>
<p>In English, this Transitive Verb example doesn’t have a subject only an object.
English permits <code class="docutils literal notranslate"><span class="pre">S</span> <span class="pre">-&gt;</span> <span class="pre">VP</span> <span class="pre">NP</span></code> as well as more the more conventional <code class="docutils literal notranslate"><span class="pre">S</span> <span class="pre">-&gt;</span> <span class="pre">NP</span> <span class="pre">VP</span></code> structures.</p>
<p>See <a class="reference external" href="https://ucrel.lancs.ac.uk/bnc2/bnc2guide.htm">https://ucrel.lancs.ac.uk/bnc2/bnc2guide.htm</a> where VVI/VVZ is used for imperative.</p>
<p>The target ConLang in this implementation is <code class="docutils literal notranslate"><span class="pre">VP</span> <span class="pre">NP</span> <span class="pre">NP</span></code>, <code class="docutils literal notranslate"><span class="pre">VP</span> <span class="pre">NP</span> <span class="pre">PP</span></code>, <code class="docutils literal notranslate"><span class="pre">VP</span> <span class="pre">NP</span> <span class="pre">PP</span> <span class="pre">NP</span> <span class="pre">PP</span></code> kinds of things. Note the recursive
NP -&gt; Det Nominal and Nominal -&gt; Nominal Noun to permit constructing complicated relationships.</p>
<p>“go-Kill you the mage” sorts of constructs.
Present is the base form.
Imperative is a “go-” prefix.
Present participle (“-ing” in English) is a “now-” prefix.
Past (“-ed” in English) is a “did-” prefix.
No person conjugation. It’s a separate word after the verb.</p>
<table class="docutils align-default" id="id3">
<caption><span class="caption-text">Verb Subcategories</span><a class="headerlink" href="#id3" title="Link to this table">¶</a></caption>
<tbody>
<tr class="row-odd"><td><p>Symbol</p></td>
<td><p>Meaning</p></td>
<td><p>Example</p></td>
</tr>
<tr class="row-even"><td><p>IV</p></td>
<td><p>intransitive verb</p></td>
<td><p>barked <code class="docutils literal notranslate"><span class="pre">(VP</span> <span class="pre">-&gt;</span> <span class="pre">IV</span> <span class="pre">Adj)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>TV</p></td>
<td><p>transitive verb</p></td>
<td><p>saw a man <code class="docutils literal notranslate"><span class="pre">(VP</span> <span class="pre">-&gt;</span> <span class="pre">TV</span> <span class="pre">NP)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>DatV</p></td>
<td><p>dative verb</p></td>
<td><p>gave a dog to a man <code class="docutils literal notranslate"><span class="pre">(VP</span> <span class="pre">-&gt;</span> <span class="pre">NP</span> <span class="pre">PP)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>SV</p></td>
<td><p>sentential verb</p></td>
<td><p>said that a dog barked <code class="docutils literal notranslate"><span class="pre">(V</span> <span class="pre">-&gt;</span> <span class="pre">SV</span> <span class="pre">S)</span></code></p></td>
</tr>
</tbody>
</table>
<p>Generally, this example ConLang lacks Intransitive verbs. “did-Bark the dog at something.”
“did-See myself the man.” “did-Give the dog to a man.” “did-Say the man did-Bark the dog at something.”</p>
<section id="rules-needed">
<h3>Rules needed<a class="headerlink" href="#rules-needed" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Pivot Declarative to VP first. <code class="docutils literal notranslate"><span class="pre">(S</span> <span class="pre">(NP</span> <span class="pre">$n)</span> <span class="pre">(VP</span> <span class="pre">$v)</span> <span class="pre">$x)</span> <span class="pre">-&gt;</span> <span class="pre">(S</span> <span class="pre">(VP</span> <span class="pre">$v)</span> <span class="pre">(NP</span> <span class="pre">$n)</span> <span class="pre">$x)</span></code>.
Imperative <code class="docutils literal notranslate"><span class="pre">(S</span> <span class="pre">(VP))</span></code> left alone.
Interrogative <code class="docutils literal notranslate"><span class="pre">(S</span> <span class="pre">(Aux</span> <span class="pre">NP</span> <span class="pre">VP))</span></code>, <code class="docutils literal notranslate"><span class="pre">(S</span> <span class="pre">(Wh-NP</span> <span class="pre">VP))</span></code>, <code class="docutils literal notranslate"><span class="pre">(S</span> <span class="pre">(Wh-NP</span> <span class="pre">Aux</span> <span class="pre">NP</span> <span class="pre">VP))</span></code> should also be swapped around to verb first.</p></li>
<li><p>Adverbs are split out with a helper. <code class="docutils literal notranslate"><span class="pre">(VP</span> <span class="pre">$x</span> <span class="pre">(ADVP</span> <span class="pre">(NP</span> <span class="pre">$y)))</span> <span class="pre">-&gt;</span> <span class="pre">(VP</span> <span class="pre">$x</span> <span class="pre">(PP</span> <span class="pre">with</span> <span class="pre">(NP</span> <span class="pre">$y)))</span></code>.</p></li>
<li><p>The Verb Subcategories rules, above.</p></li>
<li><p>Apply Tense Prefix to base Verb’s stem word. <code class="docutils literal notranslate"><span class="pre">(VP</span> <span class="pre">(MD</span> <span class="pre">$m)</span> <span class="pre">(VP</span> <span class="pre">$v))</span> <span class="pre">-&gt;</span> <span class="pre">(VP</span> <span class="pre">${f|prefix(m)}))</span></code> rewrite verb root with mode prefix.</p></li>
<li><p>Apply noun determiner suffix to nounds <code class="docutils literal notranslate"><span class="pre">(NP</span> <span class="pre">(DET</span> <span class="pre">$d)</span> <span class="pre">(N</span> <span class="pre">$n))</span> <span class="pre">-&gt;</span> <span class="pre">(NP</span> <span class="pre">${n|suffix(d)})</span></code>.</p></li>
</ul>
</section>
<section id="part-1-lexicon">
<h3>Part 1 – Lexicon<a class="headerlink" href="#part-1-lexicon" title="Link to this heading">¶</a></h3>
<p>To create words, we use a simple weighted choice random selection.</p>
<dl class="py function">
<dt class="sig sig-object py" id="language.weighted_choice">
<span class="sig-prename descclassname"><span class="pre">language.</span></span><span class="sig-name descname"><span class="pre">weighted_choice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">CT</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CT</span></span></span><a class="reference internal" href="_modules/language.html#weighted_choice"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#language.weighted_choice" title="Link to this definition">¶</a></dt>
<dd><p>Given [(string, int), …] weighted strings, pick a string.</p>
</dd></dl>

<p>A <a class="reference internal" href="#language.WordMaker" title="language.WordMaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">language.WordMaker</span></code></a> builds words from a specific set of digraph frequencies.</p>
<dl class="py class">
<dt class="sig sig-object py" id="language.WordMaker">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">language.</span></span><span class="sig-name descname"><span class="pre">WordMaker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">make_seed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/language.html#WordMaker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#language.WordMaker" title="Link to this definition">¶</a></dt>
<dd><p>Create words from a few rules.</p>
<ol class="arabic simple">
<li><p>Markov chains based on digraphs.</p></li>
<li><p>Initial Letter thrown on kind of randomly.</p></li>
<li><p>Seeded RNG from source word.</p></li>
</ol>
<dl class="py attribute">
<dt class="sig sig-object py" id="language.WordMaker.digraph_text">
<span class="sig-name descname"><span class="pre">digraph_text</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Digraph\tCount\t</span> <span class="pre">\tDigraph\tFrequency\nth\t5532\t</span> <span class="pre">\tth\t1.52\nhe\t4657\t</span> <span class="pre">\the\t1.28\nin\t3429\t</span> <span class="pre">\tin\t0.94\ner\t3420\t</span> <span class="pre">\ter\t0.94\nan\t3005\t</span> <span class="pre">\tan\t0.82\nre\t2465\t</span> <span class="pre">\tre\t0.68\nnd\t2281\t</span> <span class="pre">\tnd\t0.63\nat\t2155\t</span> <span class="pre">\tat\t0.59\non\t2086\t</span> <span class="pre">\ton\t0.57\nnt\t2058\t</span> <span class="pre">\tnt\t0.56\nha\t2040\t</span> <span class="pre">\tha\t0.56\nes\t2033\t</span> <span class="pre">\tes\t0.56\nst\t2009\t</span> <span class="pre">\tst\t0.55\nen\t2005\t</span> <span class="pre">\ten\t0.55\ned\t1942\t</span> <span class="pre">\ted\t0.53\nto\t1904\t</span> <span class="pre">\tto\t0.52\nit\t1822\t</span> <span class="pre">\tit\t0.50\nou\t1820\t</span> <span class="pre">\tou\t0.50\nea\t1720\t</span> <span class="pre">\tea\t0.47\nhi\t1690\t</span> <span class="pre">\thi\t0.46\nis\t1660\t</span> <span class="pre">\tis\t0.46\nor\t1556\t</span> <span class="pre">\tor\t0.43\nti\t1231\t</span> <span class="pre">\tti\t0.34\nas\t1211\t</span> <span class="pre">\tas\t0.33\nte\t985\t</span> <span class="pre">\tte\t0.27\net\t704\t</span> <span class="pre">\tet\t0.19\nng\t668\t</span> <span class="pre">\tng\t0.18\nof\t569\t</span> <span class="pre">\tof\t0.16\nal\t341\t</span> <span class="pre">\tal\t0.09\nde\t332\t</span> <span class="pre">\tde\t0.09\nse\t300\t</span> <span class="pre">\tse\t0.08\nle\t298\t</span> <span class="pre">\tle\t0.08\nsa\t215\t</span> <span class="pre">\tsa\t0.06\nsi\t186\t</span> <span class="pre">\tsi\t0.05\nar\t157\t</span> <span class="pre">\tar\t0.04\nve\t148\t</span> <span class="pre">\tve\t0.04\nra\t137\t</span> <span class="pre">\tra\t0.04\nld\t64\t</span> <span class="pre">\tld\t0.02\nur\t60\t</span> <span class="pre">\tur\t0.02\n'</span></em><a class="headerlink" href="#language.WordMaker.digraph_text" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="language.WordMaker.first_letter_text">
<span class="sig-name descname"><span class="pre">first_letter_text</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Letter\tFrequency\nz\t0.034%\ny\t1.620%\nx\t0.017%\nw\t6.753%\nv\t0.649%\nu\t1.487%\nt\t16.671%\ns\t7.755%\nr\t1.653%\nq\t0.173%\np\t2.545%\no\t6.264%\nn\t2.365%\nm\t4.383%\nl\t2.705%\nk\t0.590%\nj\t0.597%\ni\t6.286%\nh\t7.232%\ng\t1.950%\nf\t3.779%\ne\t2.007%\nd\t2.670%\nc\t3.511%\nb\t4.702%\na\t11.602%\n'</span></em><a class="headerlink" href="#language.WordMaker.first_letter_text" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="language.WordMaker.lengths">
<span class="sig-name descname"><span class="pre">lengths</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[(2,</span> <span class="pre">200),</span> <span class="pre">(3,</span> <span class="pre">182),</span> <span class="pre">(4,</span> <span class="pre">164),</span> <span class="pre">(5,</span> <span class="pre">146),</span> <span class="pre">(6,</span> <span class="pre">128),</span> <span class="pre">(7,</span> <span class="pre">110),</span> <span class="pre">(8,</span> <span class="pre">92),</span> <span class="pre">(9,</span> <span class="pre">74),</span> <span class="pre">(10,</span> <span class="pre">56),</span> <span class="pre">(11,</span> <span class="pre">38),</span> <span class="pre">(12,</span> <span class="pre">20)]</span></em><a class="headerlink" href="#language.WordMaker.lengths" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="language.WordMaker.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">make_seed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/language.html#WordMaker.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#language.WordMaker.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Prepare the generator using a seed-creating function
and loading the frequency tables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>make_seed</strong> – a function to transform English word to a seed for generating a ConLang word.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="language.WordMaker.load_digraph_markov">
<span class="sig-name descname"><span class="pre">load_digraph_markov</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/language.html#WordMaker.load_digraph_markov"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#language.WordMaker.load_digraph_markov" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="language.WordMaker.load_first_letters">
<span class="sig-name descname"><span class="pre">load_first_letters</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/language.html#WordMaker.load_first_letters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#language.WordMaker.load_first_letters" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="language.WordMaker.word">
<span class="sig-name descname"><span class="pre">word</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/language.html#WordMaker.word"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#language.WordMaker.word" title="Link to this definition">¶</a></dt>
<dd><p>Expand weighted Markov chains through the digraphs.</p>
</dd></dl>

</dd></dl>

<p>Two seed-generating functions to build a <a class="reference internal" href="#language.WordMaker" title="language.WordMaker"><code class="xref py py-class docutils literal notranslate"><span class="pre">language.WordMaker</span></code></a>  instance.</p>
<dl class="py function">
<dt class="sig sig-object py" id="language.naive_seed">
<span class="sig-prename descclassname"><span class="pre">language.</span></span><span class="sig-name descname"><span class="pre">naive_seed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">original</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="_modules/language.html#naive_seed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#language.naive_seed" title="Link to this definition">¶</a></dt>
<dd><p>Transform source word into RNG seed. Seems to have too many collisions.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="language.hash_seed">
<span class="sig-prename descclassname"><span class="pre">language.</span></span><span class="sig-name descname"><span class="pre">hash_seed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">original</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="_modules/language.html#hash_seed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#language.hash_seed" title="Link to this definition">¶</a></dt>
<dd><p>Transform source word into RNG seed.</p>
</dd></dl>

</section>
<section id="part-2-grammar">
<h3>Part 2 – Grammar<a class="headerlink" href="#part-2-grammar" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="language.Tag">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">language.</span></span><span class="sig-name descname"><span class="pre">Tag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pos</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">words</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#language.Tag" title="language.Tag"><span class="pre">Tag</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/language.html#Tag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#language.Tag" title="Link to this definition">¶</a></dt>
<dd><p>Tagged text that forms a tree. (Similar to NLTK.Tree.)</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="language.Tag.pos">
<span class="sig-name descname"><span class="pre">pos</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#language.Tag.pos" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="language.Tag.words">
<span class="sig-name descname"><span class="pre">words</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="#language.Tag" title="language.Tag"><span class="pre">Tag</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#language.Tag.words" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="language.Tag.from_text">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#language.Tag" title="language.Tag"><span class="pre">Tag</span></a></span></span><a class="reference internal" href="_modules/language.html#Tag.from_text"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#language.Tag.from_text" title="Link to this definition">¶</a></dt>
<dd><p>Parse (tag (tag word) (tag word)) kinds of structures.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="language.Tag.from_symbols">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_symbols</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">symbols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#language.Tag" title="language.Tag"><span class="pre">Tag</span></a></span></span><a class="reference internal" href="_modules/language.html#Tag.from_symbols"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#language.Tag.from_symbols" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="language.Tag.clean">
<span class="sig-name descname"><span class="pre">clean</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/language.html#Tag.clean"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#language.Tag.clean" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<p>Example of tagged input:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">language</span><span class="w"> </span><span class="kn">import</span> <span class="n">Tag</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">src</span> <span class="o">=</span> <span class="s1">&#39;(S (VP (TV kill) (NP (DET the) (NP mage))))&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">Tag</span><span class="o">.</span><span class="n">from_text</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
<span class="go">&#39;kill the mage&#39;</span>
</pre></div>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="language.TransformRule">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">language.</span></span><span class="sig-name descname"><span class="pre">TransformRule</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/language.html#TransformRule"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#language.TransformRule" title="Link to this definition">¶</a></dt>
<dd><p>Find a structure like (TAG $x $y) and transform to (TAG $y $x).</p>
<p>This has a number of limitations, of course.
Principally, it doesn’t use Chomsky Normal Form.
In CNF, every production having either two non-terminals or one terminal on the right-hand side.
This seems similar to the way lambda calculus rewrites higher-arity operators as single-operand lambdas.</p>
<dl class="py method">
<dt class="sig sig-object py" id="language.TransformRule.match">
<span class="sig-name descname"><span class="pre">match</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag_source</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#language.Tag" title="language.Tag"><span class="pre">Tag</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">some_content</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#language.Tag" title="language.Tag"><span class="pre">Tag</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/language.html#TransformRule.match"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#language.TransformRule.match" title="Link to this definition">¶</a></dt>
<dd><p>Match the entire tag pattern and the content being examined.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="language.TransformRule.placeholders">
<span class="sig-name descname"><span class="pre">placeholders</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag_source</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#language.Tag" title="language.Tag"><span class="pre">Tag</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">some_content</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#language.Tag" title="language.Tag"><span class="pre">Tag</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#language.Tag" title="language.Tag"><span class="pre">Tag</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/language.html#TransformRule.placeholders"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#language.TransformRule.placeholders" title="Link to this definition">¶</a></dt>
<dd><p>Given a pattern and tagged content, locate and assign values to $ placeholders.
This does a recursive depth-first search.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="language.TransformRule.emit">
<span class="sig-name descname"><span class="pre">emit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag_target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#language.Tag" title="language.Tag"><span class="pre">Tag</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#language.Tag" title="language.Tag"><span class="pre">Tag</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#language.Tag" title="language.Tag"><span class="pre">Tag</span></a></span></span><a class="reference internal" href="_modules/language.html#TransformRule.emit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#language.TransformRule.emit" title="Link to this definition">¶</a></dt>
<dd><p>Replace <code class="docutils literal notranslate"><span class="pre">$</span></code> placeholders with values. Apply functions like <code class="docutils literal notranslate"><span class="pre">${x|stem}</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="language.TransformRule.apply">
<span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">some_content</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#language.Tag" title="language.Tag"><span class="pre">Tag</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#language.Tag" title="language.Tag"><span class="pre">Tag</span></a></span></span><a class="reference internal" href="_modules/language.html#TransformRule.apply"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#language.TransformRule.apply" title="Link to this definition">¶</a></dt>
<dd><p>Apply this rule to some tagged content.</p>
</dd></dl>

</dd></dl>

<p>Example of a transformation:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">language</span><span class="w"> </span><span class="kn">import</span> <span class="n">TransformRule</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rule1</span> <span class="o">=</span> <span class="n">TransformRule</span><span class="p">(</span><span class="s2">&quot;(S (NP $n) (VP $v $n2))&quot;</span><span class="p">,</span> <span class="s2">&quot;(S (VP $v) (NP $n) (PP a $n2))&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s1</span> <span class="o">=</span> <span class="n">Tag</span><span class="o">.</span><span class="n">from_text</span><span class="p">(</span><span class="s2">&quot;(S (NP I) (VP am (NP groot)))&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xform_s1</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
<span class="go">&#39;am I a groot&#39;</span>
</pre></div>
</div>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Fiction Tools</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="plot.html">plot.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="terrain.html">terrain-tk.py and notebooks/terrain</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">language.py</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#background">Background</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-language">Implementation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="features.html">features.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="names.html">names.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="miseries.html">miseries.py</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="terrain.html" title="previous chapter">terrain-tk.py and notebooks/terrain</a></li>
      <li>Next: <a href="features.html" title="next chapter">features.py</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, S.Lott.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/language.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>